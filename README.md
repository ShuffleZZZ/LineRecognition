# Распознавание линий на чертежах

## Классические методы

### 1. Алгоритм нахождения непрерывных линий

#object_recognition

- Векторизация (Sparse Pixel Tracking) и сегментация для получения всех возможных дуг и полос
- Составление гипотез и их проверка с возможным расширением компоненты

Хранимая информация: 

- Лист с начальным и конечным положением компонент, углом наклона, направлением и их длиной

> статья: How to win a dashed line detection contest

### 2. Надежная система распознавания карт

#pirmitive_decomposition #object_extraction

- Декомпозиция изображения на _примитивные линии_ (с сохранением ориентации и соединений) \
  Декомпозиция подразумевает извлечение скелета (линии центра) и контуров (границ объекта) и их разделения на короткие линии с помощью криволинейного приближения \
  Примитивные линии - фрагменты, основанные на контуре, окружающем скелет \
  После система находит разрывы линий, основываясь на открытых окончаниях примитивных линий с схожей ориентацией \
  Если разрыв найден, образуется новый скелет путем соединения предыдущих конечных точек \
  Таким образом прямые линии образуются из множества примитивных линий, арки определяются одним из двух методов: подсчет кривизны с помощью сумм кодов
  Фримена или за счет кругового приближения при минимизации квадратичной ошибки
- Извлечение объектов из примитивных линий на основе топологической информации

> статья: A Robust Recognition System for a Drawing Superimposed on a Map

### 3. Алгоритм распознавания стандартизированных чертежей

#object_recognition #object_processing

- Объявление иерархии классов для всех видов линий, встречающихся в стандартизированных чертежах
- Основываясь на методе гипотез и проверок, линии обнаруживаются с помощью пошагового расширения в направлении концов от выбранной изначальной компоненты \
  На каждом шаге цикла добавляется новая компонента, удовлетворяющая описанию линии \
  Распознавание линий основано на анализе значений атрибутов классов для различных линий
- Алгоритм использует векторизацию (Sparse Pixel Vectorization) для прямых компонент и преобразование Хафа для обнаружения дуг \
  Для корректной работы преобразования используется препроцессинг: обнаружение контуров и прореживание (thinning)

> статья: A Generic Integrated Line Detection Algorithm and Its Object–Process Specification

### 4. Алгоритм нахождения пунктирных и последовательных линий

#object_recognition

- Векторизация и сегментация изображения
- Нахождение локальных соединений на основе расстояний и направлений
- Глобальное распознавание паттернов, разрешающее все локальные конфликты \
  Включает в себя определение типов линий

Хранимая информация: 

- Длина, точки концов и углов для каждой компоненты

> статья: A Recognition Algorithm of Dashed and Chained Lines for Automatic Inputting of Drawings

## Методы с глубоким обучением

### 1. Алгоритм распознавания чертежей на основе CNN

- Использованные данные: электротехнические и машиностроительные чертежи с текстом (всего: 8000 обучающих и 900 тестовых)
- Расширение датасета с помощью поворота и обрезания изображений, salt and pepper noise
- Принимает RGB изображения 208х208, используются OpenCV и TensorFlow
- 4 сверточных слоя, 4 max pooling слоя, 2 full connection слоя - dropout и SoftMax

> статья: Engineering Drawing Recognition Model with Convolutional Neural Network

### 2. Бинаризация зашумленных карт на основе CNN

- Отделение фона по глобальному и локальному пороговому значению
- 10 convolutional слоев, 5 deconvolutional слоев, 2 шага для четных слоев вместо pooling
- Распознает граф линий в общем, без разбиения и классификации

> статья: Novel and Effective CNN-Based Binarization for Historically Degraded As-built Drawing Maps

### 3. Глубокая векторизация чертежей

- Использованные данные: архитектурные планы, чертежи механических деталей, чертежи с шумом (всего  порядка 10 000)
- Избавление от шума и восстановление компонент изображения + постпроцессинг \
  Feed-forward NN
- Предсказание компонент чертежа, итеративная оптимизация + heuristic merging \
  Primitive Extraction Network

> статья: Deep Vectorization of Technical Drawings